<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#6c4df5">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>üì¶ Estoque Headset</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root{
      --fs: 100%;
      --ink:#0f1431; --ink2:#636aa0;
      --panel:#ffffff; --stroke:#efe9ff;
      --violet:#6a53f2; --accent:#22eacb; --pink:#ff5bb0;
      --shadow: 0 18px 48px rgba(106,83,242,.18), 0 6px 18px rgba(106,83,242,.12);
    }
    *{box-sizing:border-box}
    html{font-size:var(--fs)}
    body{
      margin:0;
      padding: env(safe-area-inset-top) max(12px, env(safe-area-inset-right)) env(safe-area-inset-bottom) max(12px, env(safe-area-inset-left));
      background:#fff; color:var(--ink);
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial;
      font-weight:700;
    }
    .wrap{max-width:1100px;margin:0 auto}
    @media (max-width:820px){ .wrap{max-width:none} }

    /* Cabe√ßalho √∫nico */
    .hero{
      background:#6a53f2;color:#fff;border-radius:22px;
      padding:28px 14px 22px;margin:8px 0 12px;text-align:center;box-shadow:var(--shadow)
    }
    .logo{width:96px;height:auto;margin:6px auto 12px;display:block;filter:drop-shadow(0 8px 24px rgba(0,0,0,.18))}
    .h1{margin:0;font-size:clamp(1.8rem,3.6vw + 1.1rem,3rem);line-height:1.06}
    .sub{margin:12px auto 14px;max-width:820px;font-size:clamp(.98rem,.6vw + .85rem,1.15rem);font-weight:650;color:#ece9ff}

    /* Zoom √∫nico */
    .zoom{display:flex;gap:12px;justify-content:center;margin:6px 0 2px}
    .zbtn{
      font-size:1.05rem;padding:.5rem .85rem;border-radius:14px;
      border:2px solid #fff;color:#fff;background:transparent;cursor:pointer
    }
    .zbtn:active{transform:scale(.98)}

    /* √Årea do app */
    .panel{background:var(--panel);border:1px solid var(--stroke);border-radius:18px;padding:16px;margin:14px 0;box-shadow:var(--shadow)}
    .panel h2{margin:0 0 12px;text-align:center;color:#6a53f2;font-size:1.8rem}

    iframe.app{
      width:100%;height:78vh;border:0;border-radius:16px;box-shadow:var(--shadow);
      background:#f7f7ff; /* reduz ‚Äútela branca‚Äù */
    }
    .fallback{margin:16px auto 6px;text-align:center;display:none}
    .btn-open{
      appearance:none;border:0;border-radius:12px;padding:.8rem 1.1rem;font-weight:800;cursor:pointer;
      color:#fff;background:linear-gradient(135deg,var(--violet),#8d76ff);box-shadow:0 10px 22px rgba(106,83,242,.32)
    }

    footer{text-align:center;margin:22px 0;color:#8b8fb8;font-size:.9rem;font-weight:600}
    footer b{color:#0d0d44}
  </style>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <img class="logo" src="logo.png" alt="Logo Headset Brasil">
      <h1 class="h1">Estoque de Materiais Headset</h1>
      <div class="sub">
        Toque no produto, escolha <b>Tipo</b>, a quantidade e registre a movimenta√ß√£o.
        Para registrar s√≥ uma observa√ß√£o, use o bot√£o <b>OK</b>.
      </div>
      <div class="zoom">
        <button class="zbtn" onclick="ajustarFonte(-1)">A-</button>
        <button class="zbtn" onclick="ajustarFonte(1)">A+</button>
      </div>
    </section>

    <section class="panel">
      <h2>Produtos & Estoque</h2>
      <iframe id="appFrame" class="app" title="Estoque Headset" loading="eager" referrerpolicy="no-referrer-when-downgrade"></iframe>
      <div class="fallback" id="fallback">
        <p>N√£o foi poss√≠vel carregar o app embutido.</p>
        <button class="btn-open" id="openBtn">Abrir em nova aba</button>
      </div>
    </section>

    <footer>¬© <b>HD TECH</b></footer>
  </div>

<script>
  // URL do seu WebApp (EXEC)
  const GAS_URL = 'https://script.google.com/macros/s/AKfycbxMtY3P5egk0xHFVEV5CyzxkbtLtfHF4pVdd7yTLGsCQbOlnS5B6XNHJbcmjaJ7Lsff0A/exec';

  // Zoom √∫nico
  let _fs = Number(localStorage.getItem('eh_fs')||'100');
  document.documentElement.style.setProperty('--fs', _fs + '%');
  function ajustarFonte(step){
    _fs = Math.min(240, Math.max(70, _fs + step*10));
    document.documentElement.style.setProperty('--fs', _fs + '%');
    localStorage.setItem('eh_fs', String(_fs));
  }

  const frame = document.getElementById('appFrame');
  const fallback = document.getElementById('fallback');
  const openBtn = document.getElementById('openBtn');

  // Sempre tenta no iframe (sem redirecionar)
  frame.src = GAS_URL;

  // Se o iframe n√£o disparar "load" em X segundos, mostra fallback
  let loaded = false;
  frame.addEventListener('load', ()=>{ loaded = true; });
  setTimeout(()=>{ if(!loaded) fallback.style.display = 'block'; }, 6000);

  openBtn.addEventListener('click', ()=>{ window.open(GAS_URL, '_blank', 'noopener'); });

  // Dica: em iPhone, apague o atalho antigo e crie outro para usar este HTML novo.
</script>
</body>
</html>
